#:include screens/accounts_screen.kv
#:include screens/transfers_screen.kv
#:include screens/standing_order_screen.kv
#:include screens/categories_screen.kv
#:include dialogs/add_value_dialog.kv
#:include dialogs/change_transferitem_dialog.kv
#:include dialogs/add_standingorder_dialog.kv
#:include dialogs/manage_accounts_dialog.kv
#:include dialogs/selection_dialogs.kv
#:include dialogs/add_category_dialog.kv

ScreenManager:
    main: main
    transfer: transfers
    accounts_screen: accounts_screen
    standingorders_screen: standingorders_screen
    categories_screen: categories_screen
    
    MainScreen:
        id: main
    TransfersScreen:
        id: transfers
    AccountsScreen:
        id: accounts_screen
    StandingOrdersScreen:
        id: standingorders_screen
    CategoriesScreen:
        id: categories_screen
    
    


<MainScreen>:
    name: 'Main'
    
    assetview: assetview
    piechartview: piechartview
    floating_button: floating_button
    main_content: main_content
    overview_header: overview_header
    oneyear_button: oneyear_button
    threeyears_button: threeyears_button
    fiveyears_button: fiveyears_button
    tenyears_button: tenyears_button
    all_button: all_button
    status_month_label: status_month_label
    status_income_label: status_income_label
    status_expenditures_label: status_expenditures_label
    legend_list: legend_list
    on_kv_post: root.app = app

    MDFloatLayout:
        md_bg_color: app.bg_color
    
    MDFloatLayout:
        MDCard:
            elevation: 0
            md_bg_color: app.bg_color
            size_hint: 1, 0.3
            pos_hint:  {'top': 0.39, 'right': 1.03}    
            MDFloatLayout:
                size: root.width, root.height
                md_bg_color: app.bg_color
                id: piechartview
    
    StackLayout:
        id: main_content
      

        MDToolbar:
            id: main_toolbar
            title: 'Overview'
            halign: 'center'
            right_action_items: [["cog", lambda x: root.dropdown_settings.open()]]
            md_bg_color: app.primary_color
            specific_text_color: app.bg_color
    
        MDBoxLayout:
            size_hint: 1, 0.01

        MDBoxLayout:
            size_hint: 1, 0.03
        
        MDCard:
            elevation: 0
            md_bg_color: app.bg_color
            size_hint: 1, 0.35
            on_release: root.open_dialog_select_month()
            MDFloatLayout:
                size: root.width, root.height
                md_bg_color: app.bg_color
                id: assetview

        MDBoxLayout:
            size_hint: 1, 0.03
        MDBoxLayout:
            size_hint: 1, 0.048
            orientation: 'horizontal'
            MDBoxLayout:
                size_hint: 0.1, 1
            MDBoxLayout:
                id: overview_header
                orientation: 'horizontal'
                
                size_hint: 0.8, 1
            MDBoxLayout:
                size_hint: 0.1, 1

        MDBoxLayout:
            size_hint: 1, 0.005
     
        MDBoxLayout:
            orientation: 'horizontal'
            md_bg_color: app.bg_color
            size_hint: 1, 0.03
            MDBoxLayout:
                size_hint: 0.2, 1
           
            MDLabel:
                size_hint: 0.25, 1
                text: 'Income:'
                font_style: 'Subtitle2'
                theme_text_color: 'Custom'
                text_color: app.text_color
                halign: 'left'

            MDLabel:
                id: status_income_label
                font_style: 'Subtitle2'
                halign: 'center'
                size_hint: 0.45, 1
                
            MDBoxLayout:
                size_hint: 0.1, 1

        MDBoxLayout:
            size_hint: 1, 0.005

        MDBoxLayout:
            orientation: 'horizontal'
            md_bg_color: app.bg_color
            size_hint: 1, 0.03
            MDBoxLayout:
                size_hint: 0.2, 1
           
            MDLabel:
                size_hint: 0.25, 1
                text: 'Expenditures:'
                font_style: 'Subtitle2'
                theme_text_color: 'Custom'
                text_color: app.text_color
                halign: 'left'

            MDLabel:
                id: status_expenditures_label
                font_style: 'Subtitle2'
                halign: 'center'
                size_hint: 0.45, 1
                
            MDBoxLayout:
                size_hint: 0.1, 1

        MDBoxLayout:
            size_hint: 1, 0.005

        MDBoxLayout:
            orientation: 'horizontal'
            md_bg_color: app.bg_color
            size_hint: 1, 0.03
            MDBoxLayout:
                size_hint: 0.2, 1
           
            MDLabel:
                size_hint: 0.25, 1
                text: 'Profit:'
                font_style: 'Subtitle2'
                theme_text_color: 'Custom'
                text_color: app.text_color
                halign: 'left'

            MDLabel:
                id: status_month_label
                font_style: 'Subtitle2'
                halign: 'center'
                size_hint: 0.45, 1
                
            MDBoxLayout:
                size_hint: 0.1, 1

        MDBoxLayout:
            size_hint: 1, 0.02

    

    MDFloatLayout:
        MDIconButton:
            icon: 'gesture-tap'
            theme_text_color: 'Custom'
            text_color: app.text_color
            pos_hint:  {'top': 0.855, 'right': 0.95}  

    MDFloatLayout:
        ScrollView:
            size_hint: 0.425, 0.25
            pos_hint: {'top': 0.34, 'right': 0.475}    
            MDList:
                id: legend_list
                
    MDFloatLayout:
        MDFillRoundFlatButton:
            id: oneyear_button
            text: '1Y'
            size_hint: 0.2, 0.03
            font_style: 'Button'
            text_color: app.bg_color
            md_bg_color: app.text_color
            on_release: root.button_clicked(oneyear_button)
            pos_hint: {'top': 0.92, 'right': 0.2}  
        MDFillRoundFlatButton:
            id: threeyears_button
            text: '3Y'
            size_hint: 0.2, 0.03
            font_style: 'Button'
            text_color: app.text_color
            md_bg_color: app.bg_color
            on_release: root.button_clicked(threeyears_button)
            pos_hint: {'top': 0.92, 'right': 0.4}  
        MDFillRoundFlatButton:
            id: fiveyears_button
            text: '5Y'
            size_hint: 0.2, 0.03
            font_style: 'Button'
            text_color: app.text_color
            md_bg_color: app.bg_color
            on_release: root.button_clicked(fiveyears_button)
            pos_hint: {'top': 0.92, 'right': 0.6}  
        MDFillRoundFlatButton:
            id: tenyears_button
            text: '10Y'
            size_hint: 0.2, 0.03
            font_style: 'Button'
            text_color: app.text_color
            md_bg_color: app.bg_color
            on_release: root.button_clicked(tenyears_button)
            pos_hint: {'top': 0.92, 'right': 0.8} 
        MDFillRoundFlatButton:
            id: all_button
            text: 'All'
            size_hint: 0.2, 0.03
            font_style: 'Button'
            text_color: app.text_color
            md_bg_color: app.bg_color
            on_release: root.button_clicked(all_button)
            pos_hint: {'top': 0.92, 'right': 1}  
  
                
        
        
        

    MDBoxLayout:
        size_hint: 1, 0.075
        orientation: 'horizontal'

        MDCard:
            elevation: 0
            size_hint: 0.25, 1
            MDBoxLayout:
                orientation: 'vertical'
                MDIcon:
                    icon: 'view-compact-outline'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.primary_color
                    md_bg_color: app.bg_color  
                MDLabel:
                    text: 'Overview'
                    font_style: 'Button'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.primary_color
                    md_bg_color: app.bg_color  

        MDCard:
            elevation: 0
            size_hint: 0.25, 1
            on_release: app.go_to_accounts()
            MDBoxLayout:
                orientation: 'vertical'
                MDIcon:
                    icon: 'account-multiple'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.bg_color
                    md_bg_color: app.primary_color   
                MDLabel:
                    text: 'Accounts'
                    font_style: 'Button'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.bg_color
                    md_bg_color: app.primary_color 

        MDCard:
            elevation: 0
            size_hint: 0.25, 1
            on_release: app.go_to_categories()
            MDBoxLayout:
                orientation: 'vertical'
                MDIcon:
                    icon: 'chart-pie'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.bg_color
                    md_bg_color: app.primary_color 
                MDLabel:
                    text: 'Categories'
                    font_style: 'Button'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    color: app.bg_color
                    md_bg_color: app.primary_color 


        MDCard:
            elevation: 0
            size_hint: 0.25, 1
            on_release: app.go_to_standingorders()
            MDBoxLayout:
                orientation: 'vertical'
                MDIcon:
                    icon: 'file-document-multiple-outline'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    text_color: app.bg_color
                    md_bg_color: app.primary_color 
                   
                MDLabel:
                    text: 'Orders'
                    font_style: 'Button'
                    halign: 'center'
                    theme_text_color: 'Custom'
                    text_color: app.bg_color
                    md_bg_color: app.primary_color 
                   
            
    MDFloatingActionButton:
        icon: 'bank-plus'
        theme_text_color: 'Custom'
        icon_color: app.bg_color
        text_color: app.bg_color
        id: floating_button
        right_pad: True
        bg_color_stack_button: app.primary_color
        bg_hint_color: app.primary_color
        md_bg_color: app.primary_color
        x: root.width - self.width - dp(20)
        y: dp(70)
        elevation_normal: 8
        on_release: root.open_dialog_add_value()

            
               
            
              
